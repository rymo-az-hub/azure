# Day 4 Progress (2026-02-07)

## Goal (6 months)
Azure特化企業（MSパートナー含む）向けに、Platform / Landing Zone / IaC / 運用設計寄りの実績を個人環境で作る。

## Summary (What was achieved today, incl. previous work)
- リポジトリ内の重複・命名揺れ・改行揺れの原因を特定し、**「正本（canonical）を一本化」＋「再発防止のルール化」**を完了
- IaC の配置を `infra/kv/` に統一し、旧 `infra/keyvault/` は `infra/kv/_legacy/` へ退避（履歴保持しつつ、参照先を明確化）
- ADR / Evidence の重複・大小混在を解消
  - `docs/evidence/README.txt`（重複）を削除
  - `docs/04-adr/` の `adr-` / `ADR-` 混在を **ADR-（大文字）に統一**
- ドキュメント導線と運用ルールを整備
  - ルート `README.md` に docs 入口（context/architecture）を追加
  - ADRテンプレに **Status / Numbering（採番ルール）** を追記
  - `.editorconfig` を追加し、UTF-8/LF 等を明文化（ZIP上書き由来の差分ノイズを抑止）

---

## Timeline (What I did, including failures)

### 1. ZIP置換後に大量の `modified` が発生（差分ノイズ）
- ZIPで上書きした結果、意図しないファイルまで差分が出た（主に改行/エンコーディング揺れ）
- 対応方針：**必要なものだけ stage → それ以外は `git restore .` で破棄**
  - 以後、コミット差分が「意図した変更だけ」になるよう制御できた

### 2. IaC 正本の一本化（infra/kv を canonical に）
- `infra/keyvault/` を削除し、内容は `infra/kv/_legacy/` に退避
- `infra/kv/pe-v1` など、今後の実装場所（正本）を `infra/kv/` に統一
- 成果として、参照先（どこを更新すべきか）が明確になった

### 3. Docs/ADR/Evidence の整理（重複削除＋命名統一）
- Evidence：`docs/evidence/README.txt` を削除（重複排除）
- ADR：`docs/04-adr/adr-*.md` を `ADR-*.md` にリネームして大小混在を解消
- これにより、今後の「ファイル探索」「レビュー」「採番」が安定する

### 4. 再発防止の仕組み追加（運用設計としての標準化）
- `README.md` に docs セクションを追加し、参照起点を明確化
- ADRテンプレに Status / Numbering を追記し、運用ルールをテンプレに埋め込んだ
- `.editorconfig` を追加し、改行（LF）/文字コード/末尾空白などの規約を定義

---

## Artifacts (what exists in the repo)
- README.md
  - docs 導線（00-context / 01-architecture）を追加
- docs/04-adr/ADR-0000-template.md
  - Status / Numbering 追記（命名・採番の統制）
- .editorconfig
  - UTF-8 / LF / trailing whitespace 等の規約
- infra/kv/
  - canonical（今後の正本）
- infra/kv/_legacy/
  - 旧テンプレ退避（参照可能だが正本ではない）

## Notes / Learnings
- ZIP上書きで差分が荒れたときは、**必要分だけ stage → `git restore .`** が最短で安全
- ADR は「接頭辞の大小混在」が後から効いてくる。テンプレに **採番/命名ルール**を埋めるのが効果的
- `.editorconfig` は “開発規約” であり、実務上は **品質とレビュー効率の向上**に直結する（差分ノイズ削減）

## Next (planned)
- Key Vault baseline（ネットワーク/保護設定/診断設定）を IaC + Evidence で拡張（`infra/kv` 正本で継続）
